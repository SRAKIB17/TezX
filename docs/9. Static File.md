# 📦 Static File Serving — `app.static(serveStatic(...))`

The `static()` method in `TezX` allows you to serve static files (like HTML, CSS, JS, images, JSON, etc.) from your file system directly via specific routes.

This method uses the utility `serveStatic(...)` provided in platform-specific modules:

* `tezx/bun`
* `tezx/node`
* `tezx/deno`

---

## ✅ Imports

```ts
// Bun
import { serveStatic } from "tezx/bun";

// Node.js
import { serveStatic } from "tezx/node";

// Deno
import { serveStatic } from "tezx/deno";
```

---

## 📘 Method: `app.static(serveStaticConfig)`

```ts
app.static(serveStatic(config));
```

### Parameters

* **config**: `ServeStatic` — Configuration object containing a list of files and optional settings for headers, cache, and allowed extensions.

---

## 📄 Type Definitions

```ts
/**
 * Represents the list of static files and their corresponding route paths.
 */
export type StaticFileArray = {
  /** Absolute path to the static file on the file system. */
  fileSource: string;

  /** Public route (URL path) where the file will be served. */
  route: string;
}[];

/**
 * Options to customize static file serving behavior.
 */
export type StaticServeOption = {
  /** Cache-Control header for client-side caching. */
  cacheControl?: string;

  /** Additional HTTP headers to include in the response. */
  headers?: Record<string, string>;

  /**
   * Allowed file extensions to serve.
   * If provided, only these extensions will be allowed.
   * Example: ["html", "css", "js"]
   */
  extensions?: string[];
};

/**
 * Static file configuration for the server.
 */
export type ServeStatic = {
  /** Array of files and their corresponding public routes. */
  files: StaticFileArray;

  /** Optional behavior settings like cache and headers. */
  options?: StaticServeOption;
};
```

---

## 🧪 Examples by Environment

### ⚡ Bun

```ts
import { TezX } from "tezx";
import { serveStatic } from "tezx/bun";

const app = new TezX();

app.static(serveStatic('/', './public', {
  extensions: ['html', 'css', 'js'],
  cacheControl: 'max-age=86400',
  headers: {
    'X-Static-Served-By': 'TezX-Bun'
  }
}));
```

---

### 🧩 Node.js

```ts
import { TezX } from "tezx";
import { serveStatic } from "tezx/node";

const app = new TezX();

app.static(serveStatic('/', './static-files', {
  extensions: ['json'],
  headers: {
    'X-Content-Type': 'application/json'
  }
}));

```

---

### 🦕 Deno

```ts
import { TezX } from "tezx";
import { serveStatic } from "tezx/deno";

const app = new TezX();

app.static(serveStatic('/', './assets', {
  extensions: ['png', 'jpg'],
  cacheControl: 'public, max-age=7200'
}));
```

---

## 📂 Folder Example

```bash
my-app/
├── public/
│   ├── index.html
│   ├── style.css
│   └── script.js
└── server.ts
```

---

## 📝 Summary

| Feature             | Description                                           |
| ------------------- | ----------------------------------------------------- |
| 🔍 Extension filter | Restrict served files by allowed extensions           |
| 🗂️ Route mapping   | Map any file to a custom route path                   |
| 🧠 Headers          | Add custom headers like `Cache-Control`, `ETag`, etc. |
| ⚡ Performance       | Serves static files fast and efficiently              |
| ✅ Multi-env support | Works with Bun, Node.js, and Deno                     |

## 🚀 Tips

* Always validate the `folder` path — `serveStatic()` resolves it internally.
* Use extension filters to avoid accidentally serving sensitive files.
* Combine `static()` with other routes for hybrid apps (static + dynamic).

## Learn More

* [MDN – Cache-Control Header](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control)
