
# **TezResponse**

## **Overview**

The `TezResponse` class provides a collection of static methods to streamline HTTP response handling in web applications. It supports a variety of response types, including JSON, HTML, plain text, XML, file downloads, and redirects, with built-in content-type handling and cross-runtime compatibility.

---

## **Import**

```typescript
import { TezResponse } from "jezx";
```

### **Custom Response Alternative**

For manual control, use the native `Response` object:

```typescript
app.get("/data", async (ctx) => {
  return new Response("Hello World", { status: 200 });
});
```

---

## **Methods**

### **`json`**

#### **Description**

Sends a JSON-formatted response.

#### **Parameters**

- `body: any` – The data to serialize as JSON.
- `status?: number` (Optional) – HTTP status code (default: `200`).
- `headers?: ResponseHeaders` (Optional) – Custom response headers.

#### **Returns**

`Response` object with `Content-Type: application/json`.

#### **Usage**

```typescript
return TezResponse.json({ message: "Success" }, 200);
// OR via context
return ctx.json({ message: "Success" }, 200);
```

---

### **`html`**

#### **Description**

Sends an HTML response.

#### **Parameters**

- `data: string` – HTML content.
- `status?: number` (Optional) – HTTP status code (default: `200`).
- `headers?: ResponseHeaders` (Optional) – Custom response headers.

#### **Returns**

`Response` object with `Content-Type: text/html`.

#### **Usage**

```typescript
return TezResponse.html("<h1>Welcome</h1>", 200);
// OR via context
return ctx.html("<h1>Welcome</h1>", 200);
```

---

### **`text`**

#### **Description**

Sends a plain text response.

#### **Parameters**

- `data: string` – Text content.
- `status?: number` (Optional) – HTTP status code (default: `200`).
- `headers?: ResponseHeaders` (Optional) – Custom response headers.

#### **Returns**

`Response` object with `Content-Type: text/plain`.

#### **Usage**

```typescript
return TezResponse.text("Hello, World!", 200);
// OR via context
return ctx.text("Hello, World!", 200);
```

---

### **`xml`**

#### **Description**

Sends an XML response.

#### **Parameters**

- `data: string` – XML content.
- `status?: number` (Optional) – HTTP status code (default: `200`).
- `headers?: ResponseHeaders` (Optional) – Custom response headers.

#### **Returns**

`Response` object with `Content-Type: application/xml`.

#### **Usage**

```typescript
return TezResponse.xml("<note><to>User</to><message>Hello</message></note>", 200);
// OR via context
return ctx.xml("<note><to>User</to><message>Hello</message></note>", 200);
```

---

### **`send`**

#### **Description**

Sends a response with automatic content-type detection if not specified.

#### **Parameters**

- `body: any` – Response body (string, object, etc.).
- `status?: number` (Optional) – HTTP status code (default: `200`).
- `headers?: ResponseHeaders` (Optional) – Custom response headers.

#### **Returns**

`Response` object with inferred or specified content type.

#### **Usage**

```typescript
return TezResponse.send("Custom Content", 200, { "X-Custom-Header": "value" });
// OR via context
return ctx.send("Custom Content", 200, { "X-Custom-Header": "value" });
```

---

### **`redirect`**

#### **Description**

Redirects the client to a specified URL.

#### **Parameters**

- `url: string` – Target URL.
- `status?: number` (Optional) – HTTP status code (default: `302`).
- `headers?: ResponseHeaders` (Optional) – Custom response headers.

#### **Returns**

`Response` object with redirect headers (`Location`).

#### **Usage**

```typescript
return TezResponse.redirect("https://example.com");
// OR via context
return ctx.redirect("https://example.com");
```

---

### **`download`**

#### **Description**

Initiates a file download with a specified filename.

#### **Parameters**

- `filePath: string` – Path to the file.
- `fileName: string` – Name presented to the client for download.

#### **Returns**

`Promise<Response>` with `Content-Disposition: attachment`.

#### **Usage**

```typescript
return await TezResponse.download("/path/to/file.pdf", "document.pdf");
// OR via context
return ctx.download("/path/to/file.pdf", "document.pdf");
```

---

### **`sendFile`**

#### **Description**

Serves a static file directly to the client.

#### **Parameters**

- `filePath: string` – Absolute or relative path to the file.
- `fileName?: string` (Optional) – Name for the file in the response.

#### **Returns**

`Promise<Response>` with file stream and appropriate headers.

#### **Usage**

```typescript
return await TezResponse.sendFile("/path/to/image.jpg", "picture.jpg");
// OR via context
return ctx.sendFile("/path/to/image.jpg", "picture.jpg");
```

---

## **Notes**

- **Cross-Runtime Support**: Compatible with Node.js, Bun, and Deno.
- **Content-Type Handling**: Automatically sets appropriate `Content-Type` headers unless overridden.
- **File Methods**: `download` and `sendFile` validate file existence before serving.
- **Context Integration**: Methods are available directly on the `ctx` object for convenience.

---

## **Example Usage**

```typescript
app.get("/json", (ctx) => {
  return TezResponse.json({ message: "Hello World" });
  // OR via context
  return ctx.json({ message: "Hello World" });
});

app.get("/redirect", (ctx) => {
  return TezResponse.redirect("https://example.com");
  // OR via context
  return ctx.redirect("https://example.com");
});

app.get("/file", async (ctx) => {
  return await TezResponse.sendFile("./assets/sample.pdf");
  // OR via context
  return ctx.sendFile("./assets/sample.pdf");
});
```

---

## **Best Practices**

- **Status Codes**: Explicitly specify status codes for clarity (e.g., `201` for created resources).
- **Headers**: Use custom headers for additional metadata (e.g., caching or rate-limiting info).
- **Async Handling**: Ensure `await` is used with `download` and `sendFile` to handle file I/O properly.

---
