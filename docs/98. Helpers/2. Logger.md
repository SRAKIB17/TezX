---
# **Logger Function**

The `TezX` logger provides a flexible and extensible logging system designed to integrate seamlessly with request/response cycles. It adheres to the `LoggerFnType` interface, enabling structured logging with support for custom log levels and formats.
---

## **Quick Start**

### **Basic Setup**

```typescript
import { TezX, loadEnv, logger } from "tezx";

const app = new TezX({
  logger: logger, // Default logger instance
  env: loadEnv(), // Environment variables
});
```

- **Behavior**: Initializes the server with built-in logging capabilities tied to the request lifecycle.

---

## **Logger Configuration**

### **LoggerFnType Interface**

Defines the structure for logger functions, allowing customization of request/response tracking and log levels.

```typescript
type LoggerFnType = () => {
  request?: (method: HTTPMethod, pathname: string) => void;
  response?: (method: HTTPMethod, pathname, status?: number) => void;
  info?: (msg: string, ...args: unknown[]) => void;
  warn?: (msg: string, ...args: unknown[]) => void;
  error?: (msg: string, ...args: unknown[]) => void;
  debug?: (msg: string, ...args: unknown[]) => void;
  success?: (msg: string, ...args: unknown[]) => void;
};
```

### **Example Usage**

```typescript
app.post("/products", async (ctx) => {
  logger().debug("Successful");
  return ctx.json({ success: true, message: "Created Successful" });
});
```

- **Result**: Logs a debug message (`[DEBUG] Successful`) during the request.

---

## **Core Methods**

### **1. Request/Response Tracking**

Tracks incoming requests and outgoing responses with contextual details.

| Method     | Parameters                     | Description                                                 |
| ---------- | ------------------------------ | ----------------------------------------------------------- |
| `request`  | `method`, `pathname`           | Logs details of incoming requests.                          |
| `response` | `method`, `pathname`, `status` | Logs details of completed responses, including HTTP status. |

#### **Example**

```typescript
const logger = () => ({
  request: (method, path) => {
    console.log(`➔ ${method} ${path}`);
  },
  response: (method, path, status) => {
    console.log(`← ${status} ${method} ${path}`);
  },
});

// Output:
// ➔ GET /api/users
// ← 200 GET /api/users
```

---

### **2. Log Levels**

Supports multiple log levels for different use cases, with variadic arguments for additional context.

| Method    | Use Case            | Example Output                       |
| --------- | ------------------- | ------------------------------------ |
| `info`    | General updates     | `[INFO] Server started on port 3000` |
| `warn`    | Non-critical issues | `[WARN] High memory usage detected`  |
| `error`   | Critical failures   | `[ERROR] Database connection failed` |
| `debug`   | Debugging details   | `[DEBUG] Route matched: /api/users`  |
| `success` | Positive outcomes   | `[SUCCESS] User created: ID-123`     |

#### **Usage**

```typescript
logger().info("Server started", { port: 3000 });
logger().error("Failed to connect", new Error("Timeout"));
```

---

## **Custom Log Format**

Customize the logger by defining your own format and behavior for each method.

### **Example**

```typescript
const logger = () => ({
  info: (msg, ...args) => {
    const timestamp = new Date().toISOString();
    console.log(`[${timestamp}] INFO: ${msg}`, ...args);
  },
  error: (msg, ...args) => {
    const timestamp = new Date().toISOString();
    console.error(`[${timestamp}] ERROR: ${msg}`, ...args);
  },
});

// Output:
// [2025-04-01T12:00:00Z] INFO: Server started { port: 3000 }
// [2025-04-01T12:00:01Z] ERROR: Database failed Error: Timeout
```

- **Behavior**: Adds timestamps and custom formatting to log messages.

---

## **Best Practices**

- **Enable Debugging Conditionally**: Use `debug` logs only in development (e.g., `if (env.NODE_ENV === "development") logger().debug(...)`).
- **Log Contextual Data**: Pass additional arguments (e.g., objects or errors) to provide richer log details.
- **Customize Output**: Tailor the logger to match your application’s logging needs (e.g., integrating with external services like Sentry).

---
