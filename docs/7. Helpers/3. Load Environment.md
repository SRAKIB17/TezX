# `loadEnv(basePath?: string)`

## Purpose

Loads `.env` files into `process.env` (Node/Bun) or `Deno.env` and returns a typed object with environment variables for easy and type-safe access.

---

## Supported `.env` Files (Priority Order)

```bash
.env â†’ .env.local â†’ .env.[mode] â†’ .env.[mode].local
```

---

## Return Type

```ts
type EnvVariables = {
  [key: string]: string;
  NODE_ENV: "development" | "production" | "test";
};
```

---

## Usage Example

```ts
import { loadEnv } from "tezx/node"; // or "tezx/bun", "tezx/deno"

const env = loadEnv("./config");
const port = env.PORT || process.env.PORT || "3000";
```

---

# Custom Context in TezX

## Purpose

Extend TezXâ€™s base `Context` interface with your own typed properties to share data such as authenticated user info or request-specific metadata across middleware and routes.

---

## Example: Adding User and Request ID

```ts
interface CustomContext {
  user?: { id: string; roles: string[] };
  requestId: string;
}

app.use(async (ctx, next) => {
  ctx.requestId = crypto.randomUUID();
  ctx.user = await authenticate(ctx.headers.get("Authorization"));
  return next();
});
```

---

## Accessing Custom Context in Routes

```ts
app.get("/me", (ctx) => ctx.json(ctx.user));
```

---

# Server Initialization with Custom Context and Env

```ts
const env = loadEnv();

const app = new TezX<CustomContext>({ env });

app.use((ctx) => {
  if (ctx.env.API_KEY !== "expected") {
    return ctx.status(401).text("Unauthorized");
  }
});
```

---

# Configuration Options for `TezX`

| Option | Type           | Description                    |
| ------ | -------------- | ------------------------------ |
| `env`  | `EnvVariables` | Injected environment variables |

Use `ctx.env` in middleware/routes to access these variables safely.

---

# Best Practices

* **.env Files Per Mode**

```bash
.env.development
.env.production
.env.production.local
```

* **Git Ignore**

```bash
.env.local
.env.*.local
```

* **Feature Flags**

```ts
if (env.FEATURE_X === "enabled") {
  enableExperimentalFeature();
}
```

---

## Advanced Context Usage

```ts
interface AppContext {
  user?: User;
  analytics: Tracker;
}

app.use((ctx, next) => {
  ctx.analytics = new Tracker(ctx.env.TRACKING_ID);
  return next();
});
```

---

ðŸ’¡ Combine `loadEnv()`, **custom typed contexts**, and `ctx.env` for a secure, clean, and scalable server foundation in TezX.
