# üöÄ TezX Configuration Guide

The `TezX` framework is highly configurable, enabling you to tailor routing, environment variables, middleware, and path handling. This guide details all configuration options available via the `TezX` constructor ‚Äî including how to plug in your own custom router (`routeRegistry`).

---

## üìå Quick Example

```ts
import { TezX } from "tezx";
import { loadEnv } from "tezx/bun";

const env = loadEnv();

const app = new TezX({
  debugMode: true,
  env,
  basePath: "/api",
});
```

---

## üß† Understanding `TezXConfig`

The `TezXConfig` type defines the options you can pass to the framework, including routing options inherited from `RouterConfig`:

```ts
export type TezXConfig = {
  debugMode?: boolean;
  onPathResolve?: (pathname: string) => string;
  routeRegistry?: RouteRegistry;  // <--- Add your custom router here
} & RouterConfig;

export type RouterConfig = {
  env?: Record<string, string | number>;
  basePath?: string;
};
```

---

## ‚öôÔ∏è Configuration Options

### 1. `debugMode`

* **Type**: `boolean`
* **Default**: `false`
* **Description**: Enables verbose logging for development and debugging.

```ts
const app = new TezX({ debugMode: true });
```

---

### 2. `env`

* **Type**: `Record<string, string | number>`
* **Description**: Supplies environment variables to your app.

```ts
const env = { PORT: "3001", API_KEY: "secret" };
const app = new TezX({ env });
console.log(app.config.env.PORT); // "3001"
```

---

### 3. `basePath`

* **Type**: `string`
* **Description**: Adds a global prefix to all routes (useful for API versioning or grouping).

```ts
const app = new TezX({ basePath: "/v1" });
app.get("/users", (ctx) => ctx.text("v1 Users"));
// Available at /v1/users
```

---

### 4. `onPathResolve`

* **Type**: `(pathname: string) => string`
* **Description**: Custom hook to rewrite or normalize incoming request paths before routing.

```ts
const app = new TezX({
  onPathResolve: (path) => path.toLowerCase().replace(/\/+$/, ""),
});
```

---

### 5. `routeRegistry` (Custom Router)

* **Type**: `RouteRegistry`
* **Description**: Inject your own custom router implementation to fully control route resolution and middleware layering.

---

## üß© How to Add a Custom `routeRegistry`

You can supply any router implementing the `RouteRegistry` interface as the `routeRegistry` property in your `TezX` config. This enables complete customization of routing behavior.

### Example: Using a Custom Router with TezX

```ts
import { TezX } from "tezx";
import { PowerfulCustomRouter } from "./PowerfulCustomRouter";

const customRouter = new PowerfulCustomRouter();

const app = new TezX({
  debugMode: true,
  routeRegistry: customRouter,
});
```

### How it works

* TezX will call `routeRegistry.search(method, path)` internally to resolve routes.
* You can register routes and middleware **directly on your custom router** using its API.
* Middleware registered with method `"ALL"` runs before method-specific handlers.
* Supports all HTTP methods and route param extraction.

---

## üõ† Real-World Example with Sub-Routing and Custom Router

```ts
import { TezX } from "tezx";
import { PowerfulCustomRouter } from "./PowerfulCustomRouter";

const router = new PowerfulCustomRouter();

router.addRoute("GET", "/hello", [
  async (ctx) => ctx.text("Hello from custom router!"),
]);

const app = new TezX({
  debugMode: true,
  routeRegistry: router,
  basePath: "/api",
});

app.use("/api", async (ctx, next) => {
  console.log(`[Middleware] ${ctx.method} ${ctx.pathname}`);
  await next();
});

// Start your server here with Bun, Deno, or Node.js

```

---

## üì¶ Summary of Configuration Options

| Option          | Type                               | Description                                |
| --------------- | ---------------------------------- | ------------------------------------------ |
| `debugMode`     | `boolean`                          | Enables verbose request and error logging  |
| `env`           | `Record<string, string \| number>` | Provides environment variables             |
| `basePath`      | `string`                           | Global prefix added to all routes          |
| `onPathResolve` | `(pathname: string) => string`     | Hook to rewrite or normalize request paths |
| `routeRegistry` | `RouteRegistry`                    | Your custom router instance                |

---

## ‚úÖ Best Practices

* Use `basePath` for API versioning or grouping routes.
* Inject a powerful custom router for fine-grained routing and middleware control.
* Utilize `onPathResolve` for path normalization or localization needs.
* Pass your environment variables with `env` for consistent config across environments.

---
