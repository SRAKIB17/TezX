
# üç™ Cookie Utilities ‚Äì TezX Helper

A utility module for managing HTTP cookies within TezX applications. This includes reading, setting, parsing, and deleting cookies in a type-safe and consistent manner.

---

## üì¶ Import

```ts
import {
  getCookie,
  allCookies,
  setCookie,
  deleteCookie,
  serializeOptions,
} from "tezx/helper";
```

---

## üß∞ API Reference

### üîç `getCookie(name: string, ctx: Context): string | undefined`

Retrieve the value of a specific cookie from the incoming HTTP request.

#### **Parameters**

* `name`: The name of the cookie.
* `ctx`: The request context.

#### **Returns**

* The decoded cookie value if found, otherwise `undefined`.

#### **Example**

```ts
const session = getCookie("session_id", ctx);
if (session) {
  console.log("Active session:", session);
}
```

---

### üìã `allCookies(ctx: Context): Record<string, string>`

Parse all cookies from the request and return them as an object.

#### **Parameters**

* `ctx`: The request context.

#### **Returns**

* A key-value map of all cookies.

#### **Example**

```ts
const cookies = allCookies(ctx);
console.log("Cookies:", cookies);
```

---

### ‚ûï `setCookie(ctx: Context, name: string, value: string, options?: CookieOptions): void`

Set a cookie on the response using optional attributes.

#### **Parameters**

* `ctx`: The response context.
* `name`: The name of the cookie.
* `value`: The value to store.
* `options` *(optional)*: Configuration like expiration, security flags, etc.

#### **Example**

```ts
setCookie(ctx, "session_id", "abc123", {
  httpOnly: true,
  secure: true,
  maxAge: 3600,
  path: "/",
});
```

---

### ‚ùå `deleteCookie(ctx: Context, name: string, options?: CookieOptions): void`

Delete a cookie by expiring it immediately.

#### **Parameters**

* `ctx`: The response context.
* `name`: The cookie to remove.
* `options` *(optional)*: Must match original cookie attributes (e.g., `path`, `domain`) to ensure deletion.

#### **Example**

```ts
deleteCookie(ctx, "session_id", { path: "/" });
```

---

### üõ†Ô∏è `serializeOptions(options: CookieOptions): string`

Serialize a cookie options object into a valid `Set-Cookie` string fragment.

> Used internally, but available for custom header construction if needed.

#### **Parameters**

* `options`: An object describing cookie settings.

#### **Returns**

* A string representation suitable for HTTP headers.

#### **Example**

```ts
const header = serializeOptions({ maxAge: 3600, httpOnly: true });
// Output: "Max-Age=3600; HttpOnly"
```

---

## üìë `CookieOptions` Interface

Use this interface to configure cookie behavior:

| Property   | Type                              | Description                                              |
| ---------- | --------------------------------- | -------------------------------------------------------- |
| `maxAge`   | `number`                          | Lifetime of the cookie (in seconds).                     |
| `expires`  | `Date`                            | Absolute expiry timestamp.                               |
| `path`     | `string`                          | Path scope of the cookie.                                |
| `domain`   | `string`                          | Domain scope of the cookie.                              |
| `secure`   | `boolean`                         | Send only over HTTPS.                                    |
| `httpOnly` | `boolean`                         | Restrict access from JavaScript.                         |
| `sameSite` | `'Strict'` \| `'Lax'` \| `'None'` | Restrict cross-site cookie behavior for CSRF protection. |

---

## ‚úÖ Best Practices

* Always use `httpOnly` and `secure` for sensitive cookies.
* Use `path` and `domain` to avoid scope conflicts.
* Set `sameSite: 'Strict'` or `'Lax'` for CSRF mitigation.
* Call `deleteCookie()` with matching `path` and `domain` for successful removal.

---
